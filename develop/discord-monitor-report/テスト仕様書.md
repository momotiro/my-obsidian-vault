# Discord監視日報システム テスト仕様書

## 1. テスト概要

### 1.1 目的
Discord監視日報システムの品質を保証し、要件定義通りに動作することを確認する。

### 1.2 テスト対象
- フロントエンド（画面操作）
- バックエンド（API）
- データベース整合性
- 権限制御
- セキュリティ

### 1.3 テスト環境
| 項目 | 内容 |
|------|------|
| OS | Windows 11 / macOS |
| ブラウザ | Chrome 最新版、Edge 最新版、Safari 最新版 |
| データベース | PostgreSQL 15+ / MySQL 8+ / MongoDB 7+ |
| テストデータ | 初期マスタデータ + サンプル日報10件 |

---

## 2. 単体テスト（Unit Test）

### 2.1 認証機能

#### TEST-AUTH-001: ログイン成功
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-AUTH-001 |
| テスト項目 | 正しい認証情報でログイン |
| 前提条件 | ユーザー「test@example.com / password123」が登録済み |
| テスト手順 | 1. POST /api/auth/login<br>2. email: test@example.com, password: password123 を送信 |
| 期待結果 | ステータスコード 200<br>JWTトークンとユーザー情報が返却される |
| 優先度 | High |

#### TEST-AUTH-002: ログイン失敗（パスワード誤り）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-AUTH-002 |
| テスト項目 | 誤ったパスワードでログイン |
| 前提条件 | ユーザー「test@example.com」が登録済み |
| テスト手順 | 1. POST /api/auth/login<br>2. email: test@example.com, password: wrong_password を送信 |
| 期待結果 | ステータスコード 401<br>エラーコード「INVALID_CREDENTIALS」が返却される |
| 優先度 | High |

#### TEST-AUTH-003: ログイン失敗（ユーザー不存在）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-AUTH-003 |
| テスト項目 | 存在しないユーザーでログイン |
| 前提条件 | なし |
| テスト手順 | 1. POST /api/auth/login<br>2. email: notexist@example.com, password: password123 を送信 |
| 期待結果 | ステータスコード 401<br>エラーコード「INVALID_CREDENTIALS」が返却される |
| 優先度 | High |

#### TEST-AUTH-004: トークン検証
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-AUTH-004 |
| テスト項目 | 有効なトークンでユーザー情報取得 |
| 前提条件 | ログイン済み、有効なトークンを保持 |
| テスト手順 | 1. GET /api/auth/me<br>2. Authorization ヘッダーにトークンを付与 |
| 期待結果 | ステータスコード 200<br>ユーザー情報が返却される |
| 優先度 | High |

#### TEST-AUTH-005: 無効なトークンでアクセス
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-AUTH-005 |
| テスト項目 | 無効なトークンでAPIアクセス |
| 前提条件 | なし |
| テスト手順 | 1. GET /api/auth/me<br>2. Authorization ヘッダーに無効なトークンを付与 |
| 期待結果 | ステータスコード 401<br>エラーコード「UNAUTHORIZED」が返却される |
| 優先度 | High |

---

### 2.2 日報機能

#### TEST-REPORT-001: 日報作成成功
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-001 |
| テスト項目 | 正常な日報作成 |
| 前提条件 | ログイン済み（担当者）、サーバーマスタに2件登録済み |
| テスト手順 | 1. POST /api/reports<br>2. 日付、監視報告2件、Problem、Planを送信 |
| 期待結果 | ステータスコード 201<br>日報が作成され、report_idが返却される |
| 優先度 | High |

#### TEST-REPORT-002: 日報作成失敗（監視報告なし）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-002 |
| テスト項目 | 監視報告が0件で日報作成 |
| 前提条件 | ログイン済み（担当者） |
| テスト手順 | 1. POST /api/reports<br>2. monitoring_records: [] で送信 |
| 期待結果 | ステータスコード 400<br>エラーコード「VALIDATION_ERROR」 |
| 優先度 | High |

#### TEST-REPORT-003: 日報一覧取得（担当者）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-003 |
| テスト項目 | 担当者が自分の日報一覧を取得 |
| 前提条件 | ログイン済み（担当者）、自分の日報が3件存在 |
| テスト手順 | 1. GET /api/reports |
| 期待結果 | ステータスコード 200<br>自分の日報3件のみ返却される |
| 優先度 | High |

#### TEST-REPORT-004: 日報一覧取得（上長）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-004 |
| テスト項目 | 上長が全員の日報一覧を取得 |
| 前提条件 | ログイン済み（上長）、複数担当者の日報が存在 |
| テスト手順 | 1. GET /api/reports |
| 期待結果 | ステータスコード 200<br>全担当者の日報が返却される |
| 優先度 | High |

#### TEST-REPORT-005: 日報詳細取得
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-005 |
| テスト項目 | 日報の詳細情報取得 |
| 前提条件 | 日報ID=1が存在 |
| テスト手順 | 1. GET /api/reports/1 |
| 期待結果 | ステータスコード 200<br>日報詳細（監視報告、コメント含む）が返却される |
| 優先度 | High |

#### TEST-REPORT-006: 日報更新成功（本人）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-006 |
| テスト項目 | 自分の日報を更新 |
| 前提条件 | ログイン済み（担当者）、自分の日報ID=1が存在 |
| テスト手順 | 1. PUT /api/reports/1<br>2. Problem、Planを更新 |
| 期待結果 | ステータスコード 200<br>日報が更新される |
| 優先度 | High |

#### TEST-REPORT-007: 日報更新失敗（他人の日報）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-007 |
| テスト項目 | 他人の日報を更新しようとする |
| 前提条件 | ログイン済み（担当者A）、担当者Bの日報ID=2が存在 |
| テスト手順 | 1. PUT /api/reports/2<br>2. Problem を更新 |
| 期待結果 | ステータスコード 403<br>エラーコード「FORBIDDEN」 |
| 優先度 | High |

#### TEST-REPORT-008: 日報削除成功
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-008 |
| テスト項目 | 自分の日報を削除 |
| 前提条件 | ログイン済み（担当者）、自分の日報ID=1が存在 |
| テスト手順 | 1. DELETE /api/reports/1 |
| 期待結果 | ステータスコード 200<br>日報が削除される |
| 優先度 | Medium |

#### TEST-REPORT-009: 期間フィルタ
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-REPORT-009 |
| テスト項目 | 期間指定で日報一覧取得 |
| 前提条件 | 複数日付の日報が存在 |
| テスト手順 | 1. GET /api/reports?start_date=2025-12-01&end_date=2025-12-31 |
| 期待結果 | ステータスコード 200<br>指定期間内の日報のみ返却される |
| 優先度 | Medium |

---

### 2.3 コメント機能

#### TEST-COMMENT-001: コメント作成成功（上長）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-COMMENT-001 |
| テスト項目 | 上長が日報にコメント投稿 |
| 前提条件 | ログイン済み（上長）、日報ID=1が存在 |
| テスト手順 | 1. POST /api/reports/1/comments<br>2. target_field: "problem", comment_text を送信 |
| 期待結果 | ステータスコード 201<br>コメントが作成される |
| 優先度 | High |

#### TEST-COMMENT-002: コメント作成失敗（担当者）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-COMMENT-002 |
| テスト項目 | 担当者がコメント投稿を試みる |
| 前提条件 | ログイン済み（担当者）、日報ID=1が存在 |
| テスト手順 | 1. POST /api/reports/1/comments<br>2. target_field: "problem", comment_text を送信 |
| 期待結果 | ステータスコード 403<br>エラーコード「FORBIDDEN」 |
| 優先度 | High |

#### TEST-COMMENT-003: コメント更新
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-COMMENT-003 |
| テスト項目 | 自分のコメントを更新 |
| 前提条件 | ログイン済み（上長）、自分のコメントID=1が存在 |
| テスト手順 | 1. PUT /api/comments/1<br>2. comment_text を更新 |
| 期待結果 | ステータスコード 200<br>コメントが更新される |
| 優先度 | Medium |

#### TEST-COMMENT-004: コメント削除
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-COMMENT-004 |
| テスト項目 | 自分のコメントを削除 |
| 前提条件 | ログイン済み（上長）、自分のコメントID=1が存在 |
| テスト手順 | 1. DELETE /api/comments/1 |
| 期待結果 | ステータスコード 200<br>コメントが削除される |
| 優先度 | Medium |

---

### 2.4 マスタ管理機能

#### TEST-MASTER-001: サーバー一覧取得
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-001 |
| テスト項目 | サーバーマスタ一覧取得 |
| 前提条件 | ログイン済み（上長）、サーバーマスタに3件登録済み |
| テスト手順 | 1. GET /api/masters/servers |
| 期待結果 | ステータスコード 200<br>サーバー3件が返却される |
| 優先度 | High |

#### TEST-MASTER-002: サーバー作成（上長）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-002 |
| テスト項目 | 上長が新規サーバーを作成 |
| 前提条件 | ログイン済み（上長） |
| テスト手順 | 1. POST /api/masters/servers<br>2. server_name, description, is_active を送信 |
| 期待結果 | ステータスコード 201<br>サーバーが作成される |
| 優先度 | High |

#### TEST-MASTER-003: サーバー作成失敗（担当者）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-003 |
| テスト項目 | 担当者が新規サーバー作成を試みる |
| 前提条件 | ログイン済み（担当者） |
| テスト手順 | 1. POST /api/masters/servers<br>2. server_name, description を送信 |
| 期待結果 | ステータスコード 403<br>エラーコード「FORBIDDEN」 |
| 優先度 | High |

#### TEST-MASTER-004: サーバー更新
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-004 |
| テスト項目 | サーバー情報を更新 |
| 前提条件 | ログイン済み（上長）、サーバーID=1が存在 |
| テスト手順 | 1. PUT /api/masters/servers/1<br>2. server_name を更新 |
| 期待結果 | ステータスコード 200<br>サーバー情報が更新される |
| 優先度 | Medium |

#### TEST-MASTER-005: サーバー削除（未使用）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-005 |
| テスト項目 | 使用されていないサーバーを削除 |
| 前提条件 | ログイン済み（上長）、未使用のサーバーID=3が存在 |
| テスト手順 | 1. DELETE /api/masters/servers/3 |
| 期待結果 | ステータスコード 200<br>サーバーが削除される |
| 優先度 | Medium |

#### TEST-MASTER-006: サーバー削除失敗（使用中）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-006 |
| テスト項目 | 使用中のサーバーを削除しようとする |
| 前提条件 | ログイン済み（上長）、日報で使用中のサーバーID=1が存在 |
| テスト手順 | 1. DELETE /api/masters/servers/1 |
| 期待結果 | ステータスコード 400<br>エラーコード「SERVER_IN_USE」 |
| 優先度 | High |

#### TEST-MASTER-007: 担当者一覧取得
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-007 |
| テスト項目 | 担当者マスタ一覧取得 |
| 前提条件 | ログイン済み（上長）、担当者が5名登録済み |
| テスト手順 | 1. GET /api/masters/users |
| 期待結果 | ステータスコード 200<br>担当者5名が返却される |
| 優先度 | High |

#### TEST-MASTER-008: 担当者作成
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-008 |
| テスト項目 | 新規担当者を作成 |
| 前提条件 | ログイン済み（上長） |
| テスト手順 | 1. POST /api/masters/users<br>2. name, email, password, role を送信 |
| 期待結果 | ステータスコード 201<br>担当者が作成される |
| 優先度 | High |

#### TEST-MASTER-009: 担当者削除失敗（使用中）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-MASTER-009 |
| テスト項目 | 日報作成済みの担当者を削除しようとする |
| 前提条件 | ログイン済み（上長）、日報作成済みの担当者ID=1が存在 |
| テスト手順 | 1. DELETE /api/masters/users/1 |
| 期待結果 | ステータスコード 400<br>エラーコード「USER_IN_USE」 |
| 優先度 | High |

---

## 3. 結合テスト（Integration Test）

### 3.1 日報作成からコメントまでの一連の流れ

#### TEST-INT-001: 日報作成→閲覧→コメント投稿
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-INT-001 |
| テスト項目 | 担当者が日報作成、上長が閲覧・コメント |
| 前提条件 | 担当者と上長がログイン可能、サーバーマスタ登録済み |
| テスト手順 | 1. 担当者ログイン<br>2. 日報作成（監視報告2件、PPP入力）<br>3. 上長ログイン<br>4. 日報一覧で作成した日報を確認<br>5. 日報詳細を開く<br>6. Problemにコメント投稿<br>7. 担当者で再ログイン<br>8. 日報詳細でコメントを確認 |
| 期待結果 | - 日報が正常に作成される<br>- 上長の一覧に表示される<br>- コメントが正常に投稿される<br>- 担当者がコメントを閲覧できる |
| 優先度 | Critical |

#### TEST-INT-002: 日報編集とコメント追加
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-INT-002 |
| テスト項目 | 日報編集後、上長が追加コメント |
| 前提条件 | 日報ID=1が存在、既にコメント1件あり |
| テスト手順 | 1. 担当者ログイン<br>2. 日報ID=1を編集（Planを追加）<br>3. 上長ログイン<br>4. 日報詳細を開く<br>5. Planにコメント投稿 |
| 期待結果 | - 日報が正常に更新される<br>- 既存コメントは保持される<br>- Planに新規コメントが追加される |
| 優先度 | High |

---

### 3.2 権限制御の結合テスト

#### TEST-INT-003: 担当者の権限制限
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-INT-003 |
| テスト項目 | 担当者が制限されている操作を実行できないことを確認 |
| 前提条件 | 担当者ログイン済み |
| テスト手順 | 1. マスタ管理画面にアクセス → 403<br>2. 他人の日報を編集 → 403<br>3. コメント投稿 → 403<br>4. 他人の日報を削除 → 403 |
| 期待結果 | すべての操作でステータスコード 403 が返却される |
| 優先度 | Critical |

#### TEST-INT-004: 上長の全権限確認
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-INT-004 |
| テスト項目 | 上長がすべての操作を実行できることを確認 |
| 前提条件 | 上長ログイン済み |
| テスト手順 | 1. 全担当者の日報一覧取得 → 200<br>2. 任意の日報詳細取得 → 200<br>3. コメント投稿 → 201<br>4. マスタ管理画面アクセス → 200<br>5. サーバー作成 → 201 |
| 期待結果 | すべての操作が正常に完了する |
| 優先度 | Critical |

---

### 3.3 データ整合性テスト

#### TEST-INT-005: 監視報告の複数行追加
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-INT-005 |
| テスト項目 | 1日に複数の監視報告を追加 |
| 前提条件 | ログイン済み（担当者）、サーバーマスタに5件登録済み |
| テスト手順 | 1. 日報作成で5つのサーバーの監視報告を追加<br>2. 保存<br>3. 日報詳細を取得 |
| 期待結果 | - 5件の監視報告がすべて保存される<br>- 日報詳細で5件すべて表示される<br>- 各監視報告にサーバー名と内容が正しく紐づく |
| 優先度 | High |

#### TEST-INT-006: コメントの対象フィールド分離
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-INT-006 |
| テスト項目 | ProblemとPlanに別々のコメント |
| 前提条件 | ログイン済み（上長）、日報ID=1が存在 |
| テスト手順 | 1. Problemにコメント投稿<br>2. Planにコメント投稿<br>3. 日報詳細を取得 |
| 期待結果 | - ProblemとPlanに各1件ずつコメントが表示される<br>- 各コメントが正しいフィールドに紐づく |
| 優先度 | High |

---

## 4. 画面テスト（UI Test）

### 4.1 ログイン画面

#### TEST-UI-001: ログイン画面表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-001 |
| テスト項目 | ログイン画面が正しく表示される |
| テスト手順 | 1. ブラウザでアプリケーションURLにアクセス |
| 期待結果 | - メールアドレス入力欄が表示される<br>- パスワード入力欄が表示される<br>- ログインボタンが表示される<br>- すべて日本語表記 |
| 優先度 | High |

#### TEST-UI-002: ログインエラー表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-002 |
| テスト項目 | ログイン失敗時のエラーメッセージ |
| テスト手順 | 1. 誤ったパスワードを入力<br>2. ログインボタンをクリック |
| 期待結果 | 「メールアドレスまたはパスワードが正しくありません」と日本語で表示される |
| 優先度 | High |

---

### 4.2 ホーム画面

#### TEST-UI-003: 日報一覧表示（担当者）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-003 |
| テスト項目 | 担当者が自分の日報一覧を閲覧 |
| 前提条件 | ログイン済み（担当者）、自分の日報が3件存在 |
| テスト手順 | 1. ホーム画面を表示 |
| 期待結果 | - 自分の日報3件が表示される<br>- 各日報に日付、監視サーバー数、コメント数が表示される<br>- 「詳細を見る」ボタンが表示される |
| 優先度 | High |

#### TEST-UI-004: 日報一覧表示（上長）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-004 |
| テスト項目 | 上長が全員の日報一覧を閲覧 |
| 前提条件 | ログイン済み（上長）、複数担当者の日報が存在 |
| テスト手順 | 1. ホーム画面を表示 |
| 期待結果 | - 全担当者の日報が表示される<br>- 担当者フィルタが表示される<br>- 「マスタ管理」ボタンが表示される |
| 優先度 | High |

#### TEST-UI-005: 期間フィルタ操作
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-005 |
| テスト項目 | 期間フィルタで日報を絞り込み |
| 前提条件 | ログイン済み（上長）、複数月の日報が存在 |
| テスト手順 | 1. 期間フィルタで「今週」を選択 |
| 期待結果 | 今週の日報のみが表示される |
| 優先度 | Medium |

---

### 4.3 日報作成・編集画面

#### TEST-UI-006: 日報作成画面表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-006 |
| テスト項目 | 日報作成画面の初期表示 |
| 前提条件 | ログイン済み（担当者） |
| テスト手順 | 1. 「新規日報作成」ボタンをクリック |
| 期待結果 | - 日付が今日の日付で自動設定される<br>- 監視報告入力欄が1つ表示される<br>- Problem、Plan入力欄が表示される<br>- 「保存」「キャンセル」ボタンが表示される |
| 優先度 | High |

#### TEST-UI-007: 監視報告の追加
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-007 |
| テスト項目 | 監視報告を複数行追加 |
| 前提条件 | 日報作成画面を表示中 |
| テスト手順 | 1. 「監視報告を追加」ボタンを3回クリック |
| 期待結果 | 監視報告入力欄が4つ（初期1つ + 追加3つ）表示される |
| 優先度 | High |

#### TEST-UI-008: 監視報告の削除
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-008 |
| テスト項目 | 監視報告を削除 |
| 前提条件 | 日報作成画面で監視報告が3つ表示中 |
| テスト手順 | 1. 2番目の監視報告の「削除」ボタンをクリック |
| 期待結果 | 2番目の監視報告が削除され、2つになる |
| 優先度 | Medium |

#### TEST-UI-009: サーバー選択プルダウン
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-009 |
| テスト項目 | サーバーマスタからプルダウン選択 |
| 前提条件 | 日報作成画面を表示中、サーバーマスタに3件登録済み |
| テスト手順 | 1. サーバープルダウンをクリック |
| 期待結果 | サーバーマスタの3件がプルダウンに表示される |
| 優先度 | High |

#### TEST-UI-010: 日報保存成功
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-010 |
| テスト項目 | 日報を正常に保存 |
| 前提条件 | 日報作成画面で必須項目を入力済み |
| テスト手順 | 1. 「保存」ボタンをクリック |
| 期待結果 | - 保存成功メッセージが表示される<br>- ホーム画面に遷移する<br>- 作成した日報が一覧に表示される |
| 優先度 | Critical |

#### TEST-UI-011: バリデーションエラー表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-011 |
| テスト項目 | 監視報告未入力で保存 |
| 前提条件 | 日報作成画面で監視報告を入力していない |
| テスト手順 | 1. 「保存」ボタンをクリック |
| 期待結果 | 「監視報告は1件以上必要です」とエラーメッセージが表示される |
| 優先度 | High |

---

### 4.4 日報詳細画面

#### TEST-UI-012: 日報詳細表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-012 |
| テスト項目 | 日報の詳細情報を表示 |
| 前提条件 | 日報ID=1が存在（監視報告2件、コメント1件） |
| テスト手順 | 1. 日報一覧から「詳細を見る」をクリック |
| 期待結果 | - 日付と担当者名が表示される<br>- 監視報告2件が表示される<br>- Problem、Planが表示される<br>- コメント1件が表示される |
| 優先度 | High |

#### TEST-UI-013: コメント投稿（上長）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-013 |
| テスト項目 | 上長がコメントを投稿 |
| 前提条件 | ログイン済み（上長）、日報詳細画面を表示中 |
| テスト手順 | 1. Problemの「コメントを追加」欄にテキスト入力<br>2. 「投稿」ボタンをクリック |
| 期待結果 | - コメントがリアルタイムで表示される<br>- 投稿者名と日時が表示される |
| 優先度 | High |

#### TEST-UI-014: コメント欄非表示（担当者）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-014 |
| テスト項目 | 担当者にコメント投稿欄が表示されない |
| 前提条件 | ログイン済み（担当者）、日報詳細画面を表示中 |
| テスト手順 | 1. 日報詳細を開く |
| 期待結果 | - 既存コメントは閲覧できる<br>- 「コメントを追加」入力欄は表示されない |
| 優先度 | High |

#### TEST-UI-015: 編集ボタン表示（本人のみ）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-015 |
| テスト項目 | 自分の日報のみ編集ボタンが表示される |
| 前提条件 | ログイン済み（担当者A） |
| テスト手順 | 1. 自分の日報詳細を開く → 「編集」ボタン確認<br>2. 他人の日報詳細を開く（上長経由で取得） |
| 期待結果 | - 自分の日報には「編集」ボタンが表示される<br>- 他人の日報には「編集」ボタンが表示されない |
| 優先度 | High |

---

### 4.5 マスタ管理画面

#### TEST-UI-016: マスタ管理画面アクセス（上長）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-016 |
| テスト項目 | 上長がマスタ管理画面にアクセス |
| 前提条件 | ログイン済み（上長） |
| テスト手順 | 1. 「マスタ管理」ボタンをクリック |
| 期待結果 | マスタ管理画面が表示される |
| 優先度 | High |

#### TEST-UI-017: マスタ管理画面アクセス不可（担当者）
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-017 |
| テスト項目 | 担当者にマスタ管理ボタンが表示されない |
| 前提条件 | ログイン済み（担当者） |
| テスト手順 | 1. ホーム画面を表示 |
| 期待結果 | 「マスタ管理」ボタンが表示されない |
| 優先度 | High |

#### TEST-UI-018: サーバーマスタ一覧表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-018 |
| テスト項目 | サーバーマスタ一覧を表示 |
| 前提条件 | ログイン済み（上長）、サーバーマスタに3件登録済み |
| テスト手順 | 1. マスタ管理画面を開く<br>2. 「Discordサーバー」タブをクリック |
| 期待結果 | サーバー3件が一覧表示される（サーバー名、状態、操作ボタン） |
| 優先度 | High |

#### TEST-UI-019: サーバー追加モーダル
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-019 |
| テスト項目 | サーバー追加モーダルを開く |
| 前提条件 | マスタ管理画面を表示中 |
| テスト手順 | 1. 「新規サーバー追加」ボタンをクリック |
| 期待結果 | - モーダルが開く<br>- サーバー名、説明、有効フラグの入力欄が表示される<br>- 「保存」「キャンセル」ボタンが表示される |
| 優先度 | Medium |

#### TEST-UI-020: 担当者マスタ一覧表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-UI-020 |
| テスト項目 | 担当者マスタ一覧を表示 |
| 前提条件 | ログイン済み（上長）、担当者が5名登録済み |
| テスト手順 | 1. マスタ管理画面を開く<br>2. 「担当者」タブをクリック |
| 期待結果 | 担当者5名が一覧表示される（氏名、メール、権限、操作ボタン） |
| 優先度 | High |

---

## 5. パフォーマンステスト

### 5.1 レスポンスタイムテスト

#### TEST-PERF-001: 日報一覧取得速度
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-PERF-001 |
| テスト項目 | 日報100件の一覧取得速度 |
| 前提条件 | 日報が100件存在 |
| テスト手順 | 1. GET /api/reports を10回実行<br>2. 平均レスポンスタイムを計測 |
| 期待結果 | 平均レスポンスタイム 500ms 以下 |
| 優先度 | Medium |

#### TEST-PERF-002: 日報詳細取得速度
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-PERF-002 |
| テスト項目 | 監視報告10件+コメント5件を含む日報詳細取得 |
| 前提条件 | 日報ID=1（監視報告10件、コメント5件） |
| テスト手順 | 1. GET /api/reports/1 を10回実行<br>2. 平均レスポンスタイムを計測 |
| 期待結果 | 平均レスポンスタイム 300ms 以下 |
| 優先度 | Medium |

---

### 5.2 負荷テスト

#### TEST-LOAD-001: 同時アクセステスト
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-LOAD-001 |
| テスト項目 | 同時10ユーザーでの日報作成 |
| 前提条件 | 10ユーザーが登録済み |
| テスト手順 | 1. 10ユーザーが同時に日報を作成<br>2. すべてのリクエストの成功率を確認 |
| 期待結果 | 成功率 100%、エラー発生なし |
| 優先度 | Low |

---

## 6. セキュリティテスト

### 6.1 認証・認可テスト

#### TEST-SEC-001: SQLインジェクション対策
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-SEC-001 |
| テスト項目 | SQLインジェクション攻撃への耐性 |
| テスト手順 | 1. ログインAPIにSQL文を含むリクエストを送信<br>email: "admin' OR '1'='1" |
| 期待結果 | ステータスコード 401、ログイン失敗 |
| 優先度 | Critical |

#### TEST-SEC-002: XSS対策
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-SEC-002 |
| テスト項目 | クロスサイトスクリプティング対策 |
| テスト手順 | 1. 日報のProblemに `<script>alert('XSS')</script>` を入力<br>2. 日報詳細を表示 |
| 期待結果 | スクリプトが実行されず、エスケープされて表示される |
| 優先度 | Critical |

#### TEST-SEC-003: CSRF対策
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-SEC-003 |
| テスト項目 | クロスサイトリクエストフォージェリ対策 |
| テスト手順 | 1. 外部サイトから日報作成APIを呼び出し |
| 期待結果 | CSRFトークン不一致でリクエストが拒否される |
| 優先度 | High |

#### TEST-SEC-004: パスワードハッシュ化
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-SEC-004 |
| テスト項目 | パスワードがハッシュ化されて保存される |
| テスト手順 | 1. 新規ユーザーを作成<br>2. データベースを直接確認 |
| 期待結果 | パスワードが平文で保存されていない（bcryptなどでハッシュ化） |
| 優先度 | Critical |

---

## 7. ブラウザ互換性テスト

### 7.1 対応ブラウザでの動作確認

#### TEST-BROWSER-001: Chrome動作確認
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-BROWSER-001 |
| テスト項目 | Google Chrome 最新版での全機能動作 |
| テスト手順 | 1. Chrome最新版で全画面を操作 |
| 期待結果 | すべての機能が正常に動作する |
| 優先度 | High |

#### TEST-BROWSER-002: Edge動作確認
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-BROWSER-002 |
| テスト項目 | Microsoft Edge 最新版での全機能動作 |
| テスト手順 | 1. Edge最新版で全画面を操作 |
| 期待結果 | すべての機能が正常に動作する |
| 優先度 | Medium |

#### TEST-BROWSER-003: Safari動作確認
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-BROWSER-003 |
| テスト項目 | Safari 最新版での全機能動作 |
| テスト手順 | 1. Safari最新版で全画面を操作 |
| テスト手順 | すべての機能が正常に動作する |
| 優先度 | Medium |

---

## 8. レスポンシブデザインテスト

### 8.1 モバイル表示確認

#### TEST-RESPONSIVE-001: スマートフォン表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-RESPONSIVE-001 |
| テスト項目 | iPhone（375px幅）での表示 |
| テスト手順 | 1. Chrome DevToolsでiPhone表示に切り替え<br>2. 全画面を確認 |
| 期待結果 | - レイアウトが崩れない<br>- テキストが読みやすい<br>- ボタンがタップしやすい |
| 優先度 | Medium |

#### TEST-RESPONSIVE-002: タブレット表示
| 項目 | 内容 |
|------|------|
| テストケースID | TEST-RESPONSIVE-002 |
| テスト項目 | iPad（768px幅）での表示 |
| テスト手順 | 1. Chrome DevToolsでiPad表示に切り替え<br>2. 全画面を確認 |
| 期待結果 | - レイアウトが適切に調整される<br>- すべての機能が操作可能 |
| 優先度 | Medium |

---

## 9. テスト実施計画

### 9.1 テストフェーズ

| フェーズ | 期間 | 担当 | 内容 |
|---------|------|------|------|
| 単体テスト | 3日 | 開発者 | API、コンポーネント単位のテスト |
| 結合テスト | 2日 | 開発者 | 画面間遷移、データ整合性テスト |
| 画面テスト | 2日 | QA担当 | UIの動作確認、デザイン確認 |
| 性能・負荷テスト | 1日 | 開発者 | レスポンスタイム、同時接続テスト |
| セキュリティテスト | 1日 | セキュリティ担当 | 脆弱性診断 |
| ブラウザ互換テスト | 1日 | QA担当 | 各ブラウザでの動作確認 |
| 受け入れテスト | 2日 | ユーザー代表 | 実際の業務フローでの確認 |

### 9.2 テスト環境

| 環境 | 用途 |
|------|------|
| 開発環境 | 単体テスト、結合テスト |
| ステージング環境 | 画面テスト、性能テスト、受け入れテスト |
| 本番環境 | リリース後の最終確認 |

---

## 10. バグ管理

### 10.1 バグ優先度定義

| 優先度 | 定義 | 対応期限 |
|--------|------|----------|
| Critical | システムが使用不可、データ損失、セキュリティリスク | 即座に修正 |
| High | 主要機能が動作しない、回避策なし | 24時間以内 |
| Medium | 一部機能が動作しない、回避策あり | 1週間以内 |
| Low | 軽微な表示崩れ、利便性の問題 | 次回リリースで対応 |

### 10.2 テスト完了基準

- すべてのCritical、High優先度のテストケースが合格
- バグ修正率 95% 以上（Low優先度除く）
- セキュリティテストで重大な脆弱性が発見されていない
- 受け入れテストでユーザー承認を得られている

---

## 11. テスト記録テンプレート

### 11.1 テスト実施記録

| 項目 | 内容 |
|------|------|
| テストケースID | TEST-XXX-XXX |
| 実施日 | YYYY/MM/DD |
| 実施者 | 氏名 |
| テスト結果 | 合格 / 不合格 |
| 備考 | 不具合内容、再現手順など |

---

## 付録: 自動テストツール

### 推奨ツール
- **単体テスト**: Jest, Vitest
- **E2Eテスト**: Playwright, Cypress
- **APIテスト**: Postman, REST Client
- **負荷テスト**: Apache JMeter, k6
- **セキュリティテスト**: OWASP ZAP

---

**バージョン**: 1.0.0
**作成日**: 2025-12-31
**最終更新日**: 2025-12-31
